---
title: "京都府森林基本図の位置ずれ補正"
description: "京都府から提供を受けた森林基本図データに原因不明の位置ずれがあったため、Q地図タイル作成に当たって、線形近似によりずれを補正の上、公開しました。その経緯と補正方法について以下に記します。 ずれの発見 全国Q地図では、全国"
date: 2023-07-16
---

京都府から提供を受けた森林基本図データに原因不明の位置ずれがあったため、Q地図タイル作成に当たって、線形近似によりずれを補正の上、公開しました。その経緯と補正方法について以下に記します。

## ずれの発見

全国Q地図では、全国の都道府県が作成している森林基本図（縮尺1:5,000の地形図）をQ地図タイルとして公開し、全国Q地図で閲覧できるようにする取組を行っています。

この活動の一環として、京都府の森林基本図のタイル化を行うため、2023年1月23日、京都府から府内全域の森林基本図データの提供を受けました。

提供を受けたデータは、TIF形式の画像ファイルと、そのワールドファイル（拡張子tfw）です（図１、各482個）。

![](/images/%E5%9B%B3-1024x576.png)

図１　京都府から提供を受けた森林基本図データ

ワールドファイルとは、画像ファイルの位置（座標）を示すもので、ワールドファイルがあれば、GISソフトを使って画像ファイルを正しい位置に配置することができます。

地図タイル作成に当たって、画像ファイルそれぞれについて４隅の位置をプロットして座標（経緯度や平面直角座標）を付与するという作業が必要になりますが、ワールドファイルがある場合にはこの過程を省略できるため、大幅な作業時間短縮になります。

今回も、京都府から提供を受けたワールドファイルを使って、地図タイルを作成し地理院地図と重ね合わせてみたところ、ずれが発生していることが分かりました。

図２に示すように、地理院地図の三角点と森林基本図の三角点がずれているのが分かります。

※三角点は、地図上で最も正確な位置にプロットされていて、森林基本図と地理院地図に共通して表示があるため、ずれの確認に便利です。

![](/images/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88-2023-07-15-200628-1024x440.jpg)

図２　ずれ

紙地図をスキャンした地図をタイル化した場合、紙の歪みなどの要因により、若干のずれは生じますが、経験上、京都府の位置ずれは通常よりも大きなものでした。

## ずれの大きさ

全国Q地図では、できるだけ正確に位置合わせ（ジオリファレンス）を行ってタイルを作成する方針であるため、ずれの原因を特定し補正した上で公開することとしました。

まず、ずれの量は、地域によって異なるようであったため、以下の手順により、均等になるように配置した18地点のずれの量を調査しました。

1.  全国Q地図の外部タイル読み込み機能で京都府森林基本図タイルを読み込む。
2.  日本測地系の平面直角座標系第６系500mごとに引かれた方眼線の交点の、平面直角座標（世界測地系）を読み取る。
3.  読み取った世界測地系の平面直角座標を日本測地系の平面直角座標に変換する。
4.  方眼の座標値と変換した座標値（いずれも日本測地系）の差分を計算する。

※京都府の森林基本図は、昭和37年度～平成2年度に作成されたものであるため、日本測地系で作成されています。

表１に示すように、X（南北）方向に最大約9m、Y（東西）方向に最大約18ｍのずれが生じていることが分かりました。

世界測地系X

世界測地系Y

日本測地系X(変換)

日本測地系Y(変換)

日本測地系X(方眼)

差X

日本測地系Y(方眼)

差Y

\-25646.9

\-70244.7

\-25,994.0

\-69,985.5

\-26000

6.0

\-70000

14.5

\-41150.3

\-83243.9

\-41,497.8

\-82,984.3

\-41500

2.2

\-83000

15.7

\-58151.3

\-70245.3

\-58,498.5

\-69,985.6

\-58500

1.5

\-70000

14.4

\-75653.0

\-86245.3

\-76,000.5

\-85,985.5

\-76000

\-0.5

\-86000

14.5

\-92654.8

\-52749.0

\-93,002.0

\-52,488.7

\-93000

\-2.0

\-52500

11.3

\-92654.8

\-18254.8

\-93,001.3

\-17,994.4

\-93000

\-1.3

\-18000

5.6

\-105658.4

\-38250.8

\-106,005.4

\-37,990.2

\-106000

\-5.4

\-38000

9.8

\-118660.3

\-18254.1

\-119,006.9

\-17,993.1

\-119000

\-6.9

\-18000

6.9

\-139660.4

3244.1

\-140,006.8

3,505.5

\-140000

\-6.8

3500

5.5

\-24647.7

\-70244.3

\-24,994.9

\-69,985.1

\-25000

5.1

\-70000

14.9

\-72152.0

\-24749.8

\-72,498.5

\-24,489.8

\-72500

1.5

\-24500

10.2

\-70153.2

\-53749.2

\-70,500.3

\-53,489.2

\-70500

\-0.3

\-53500

10.8

 -45150.8

\-103741.3

\-45,498.2

\-103,482.0

\-45500

1.8

\-103500

18.0

\-91655.9

\-34251.5

\-92,002.8

\-33,991.3

\-92000

\-2.8

\-34000

8.7

 -105157.9

\-56748.0

\-105,505.1

\-56,487.7

\-105500

\-5.1

\-56500

12.3

\-123159.4

\-5753.1

\-123,505.8

\-5,492.0

\-123500

\-5.8

\-5500

8.0

\-138162.2

\-24252.2

\-138,508.8

\-23,991.0

\-138500

\-8.8

\-24000

9.0

\-45151.8

\-49748.3

\-45,498.5

\-49,488.6

\-45500

1.5

\-49500

11.4

表１　ずれの量

## ずれの原因の調査

ずれが生じた原因が判明すれば、補正することが可能となるため、原因の調査を行いました。

上述のとおり、京都府森林基本図は日本測地系で作成されたものであるため、紙地図をスキャンしワールドファイルを作成する過程で、以下のような理由でずれが生じたという仮説を立てて検証しましたが、いずれもずれを再現することはできませんでした。

仮説１　測地系変換に当たって国土地理院の変換プログラムを使用せずに、地域によらず一定の値を加算した

仮説２　測地系変換に当たって国土地理院の変換プログラムを使用せずに、簡易な手法（EPSG）で変換した

また、京都府の担当部署に、データ作成の際の記録（委託した場合の仕様書、業者作成の作業報告等）の提供を依頼しましたが、回答は得られませんでした。  
※提供を受けたデータの作成日時は、2006年11月になっていました。

## ずれの補正

位置ずれの具体的な原因は特定できませんでした。しかし、ずれの大きさは平面直角座標系の座標値によって変化し、X（南北）方向、Y（東西）方向ともに線形近似が可能であることが判明しました（図３）。

![](/images/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88-2023-07-08-190406-1024x346.png)

図３　ずれの量

この結果を基に、以下の式を用いて位置ずれの補正を行うこととしました。

ここで、X1、Y1は補正前の座標を、X2、Y2は補正後の座標を表します。

X2 = X1 – X1 \* 0.000114353 + 7.899848681  
Y2 = Y1 – Y1 \* -0.000116046 + 5.707504979

なお、482個のワールドファイルを補正する必要があったため、Pythonにより自作のプログラムを作成し、一括変換を行いました。

## 補正結果

補正前後の比較を図４に示します。精度良く補正できていることが分かります。  
※本来、定量的に評価すべきですが、そこまでできていません。

![](/images/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88-2023-07-15-200125-1024x438.jpg)

![](/images/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88-2023-07-15-200426-1024x440.jpg)

図４　左：補正前、右：補正後