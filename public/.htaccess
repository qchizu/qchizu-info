RewriteEngine On

# ===== 投稿（posts）: /YYYY/MM/DD/{slug}/ 形式 =====
RewriteRule ^2025/03/30/gdal2nptiles/?$ /making-elevation-tiles/ [R=301,L]
RewriteRule ^how-to-make-elevation-tiles/?$ /making-elevation-tiles/ [R=301,L]
RewriteRule ^2025/03/15/rinya-elevation-tiles/?$ /rinya-elevation-tiles/ [R=301,L]
RewriteRule ^2024/12/29/elevation-tile/?$ /elevation-tile/ [R=301,L]
RewriteRule ^2024/11/11/foss4g2024/?$ /foss4g2024/ [R=301,L]
RewriteRule ^2024/06/15/cs/?$ /cs-parameter/ [R=301,L]
RewriteRule ^2024/06/09/delete/?$ / [R=301,L]
RewriteRule ^2024/06/09/latlng/?$ /latlng-precision/ [R=301,L]
RewriteRule ^2024/06/09/zushiki/?$ /chiriin-map-symbol-update/ [R=301,L]

# ===== 固定ページ（pages）: 階層構造 =====
RewriteRule ^qchizu/?$ /about/ [R=301,L]
RewriteRule ^qchizu/tile/?$ /guides/ [R=301,L]
RewriteRule ^qchizu/tile/rrim/?$ /rrim-cs-viewer/ [R=301,L]
RewriteRule ^qchizu/tile/shinrinkihonzu/?$ /forest-basemap/ [R=301,L]
RewriteRule ^qchizu/tile/tokyo3000/?$ /tokyo-topographic-map/ [R=301,L]
RewriteRule ^qchizu/tile/tool-contour/?$ /tool-contour/ [R=301,L]
RewriteRule ^qchizu/tile/mlit_road/?$ /road-structures/ [R=301,L]
RewriteRule ^qchizu/tile/bus-stop/?$ /bus-stop/ [R=301,L]
RewriteRule ^qchizu/tile/tile-pond/?$ /tile-pond/ [R=301,L]
RewriteRule ^qchizu/maplibre_terrain/?$ /maplibre-viewer/ [R=301,L]
RewriteRule ^qchizu/26p_kyoto_f/?$ /kyoto-forest-map-correction/ [R=301,L]
RewriteRule ^qchizu/update/?$ /update/ [R=301,L]
RewriteRule ^qchizu/improve/?$ /minna/ [R=301,L]
RewriteRule ^qchizu/case/?$ /use-cases/ [R=301,L]
RewriteRule ^qchizu/reprint/?$ /reprint/ [R=301,L]
RewriteRule ^qchizu/%E5%85%A8%E5%9B%BDQ%E5%9C%B0%E5%9B%B3%E3%81%AE%E6%A9%9F%E8%83%BD/?$ /guides/ [R=301,L]
RewriteRule ^qchizu/%E5%85%A8%E5%9B%BDQ%E5%9C%B0%E5%9B%B3%E3%81%AE%E6%A9%9F%E8%83%BD/stereo/?$ /stereo-viewing/ [R=301,L]
RewriteRule ^knowledge/?$ /posts/ [R=301,L]
RewriteRule ^knowledge/lat_lon/?$ /latlng-precision/ [R=301,L]
RewriteRule ^knowledge/knowledge-delite-tiles/?$ / [R=301,L]
RewriteRule ^mail/?$ /about/ [R=301,L]
RewriteRule ^portfolio-yvftw29nsgyt6dpzzxnk/?$ / [R=301,L]

# ===== WordPress画像ファイルのリダイレクト =====
RewriteRule ^wp-content/uploads/.*/([^/]+)$ /images/$1 [R=301,L]

# ===== WordPressクエリパラメーター形式のリダイレクト =====
RewriteCond %{QUERY_STRING} ^p=
RewriteRule ^$ / [R=301,QSD,L]

# ===== WordPress特有のURLを410 Goneで返す =====
RewriteRule ^wp-admin(/.*)?$ - [R=410,L]
RewriteRule ^wp-login\.php$ - [R=410,L]
RewriteRule ^xmlrpc\.php$ - [R=410,L]
RewriteRule ^wp-json(/.*)?$ - [R=410,L]
RewriteRule ^feed(/.*)?$ - [R=410,L]
